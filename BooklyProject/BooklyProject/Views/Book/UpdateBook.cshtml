@model BooklyProject.Entities.Book
@{
    ViewBag.Title = "UpdateBook";
    Layout = "~/Views/AdminLayout/Index.cshtml";
}

<h3>Kitap Güncelle</h3>

<form asp-action="UpdateBook" method="post">

    <input type="hidden" name="BookId" value="@Model.BookId" />
    <input type="hidden" name="AuthorId" value="@Model.AuthorId" />
    


    <label>Kitap Adı</label>
    <input type="text" name="BookName" class="form-control" value="@Model.BookName" required />
    <br />

    <label>Yazar Adı</label>
    <input type="text" name="Name" class="form-control" value="@Model.Author.Name" required />
    <br />

    <label>Yazar Soyadı</label>
    <input type="text" name="Surname" class="form-control" value="@Model.Author.Surname" required />
    <br />

    <label>Kapak Resmi</label>
    <input type="text" name="CoverImageUrl" class="form-control" value="@Model.CoverImageUrl" required />
    <br />

    <label>Fiyat</label>
    <input type="text" name="Price" class="form-control" value="@Model.Price" required />
    <br />

    <label>İndirim Var mı? (Evet/Hayır)</label>
    <div class="form-check">
        <input type="radio" id="yes" name="isOnSale" value="yes" class="form-check-input"
               @(Model.IsOnSale ? "checked" : "") onchange="toggleDiscountInput()" required />
        <label class="form-check-label" for="yes">Evet</label>
    </div>
    <div class="form-check">
        <input type="radio" id="no" name="isOnSale" value="no" class="form-check-input"
               @(Model.IsOnSale == false ? "checked" : "") onchange="toggleDiscountInput()" required />
        <label class="form-check-label" for="no">Hayır</label>
    </div>
    <br />

    <label>İndirim Yüzdesi</label>
    <input type="text" name="DiscountRate" class="form-control" id="discountRate" value="@Model.DiscountRate" required />
    <br />

    <label>Puan</label>
    <input type="text" name="Review" class="form-control" value="@Model.Review" required />
    <br />

    <button class="btn btn-outline-dark"><i class="fa fa-save"></i> Güncelle</button>

</form>

<script>
    // İndirim durumu seçildiğinde DiscountRate input'unu kontrol et
    function toggleDiscountInput() {
        var discountRateInput = document.getElementById('discountRate');
        var isOnSaleYes = document.getElementById('yes').checked;

        // Evet seçildiyse, DiscountRate aktif olur
        if (isOnSaleYes) {
            discountRateInput.disabled = false; // Alanı aktif hale getir
        } else {
            discountRateInput.disabled = true; // Alanı pasif hale getir
            discountRateInput.value = ''; // Pasif olursa içeriği temizle
        }
    }

    // Sayfa yüklendiğinde kontrolü başlat
    window.onload = function () {
        toggleDiscountInput();
    }
</script>
